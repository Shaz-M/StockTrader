{% extends 'base.html' %} {% load static %} {% block css %}
<link rel="stylesheet" href="{% static 'stocks/styles.css' %}" />

{% endblock css %} {% block content %}

<div class="container mt-5">
  <div class="nameDiv">
    <h1 class="mb-0" id="ticker">{{ stockObj.ticker }}</h1>
    <h6 id="fullName">{{ stockObj.fullName }}</h6>
  </div>
  <div class="priceDiv">
    <h2 id="price"></h2>
    <h6 id="change"></h6>
  </div>
  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
    <div id="tradingview_b3383"></div>
    <script
      type="text/javascript"
      src="https://s3.tradingview.com/tv.js"
    ></script>
    <script type="text/javascript">
      let ticker = $("#ticker").text();
      ticker = ticker.toUpperCase();
      new TradingView.MediumWidget({
        symbols: [[ticker + "|1D"]],
        chartOnly: true,
        width: "100%",
        height: "100%",
        locale: "en",
        colorTheme: "dark",
        isTransparent: false,
        autosize: true,
        showVolume: false,
        hideDateRanges: false,
        scalePosition: "right",
        scaleMode: "Normal",
        fontFamily:
          "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
        noTimeScale: false,
        valuesTracking: "1",
        chartType: "line",
        fontColor: "#787b86",
        gridLineColor: "rgba(240, 243, 250, 0.06)",
        color: "rgba(8, 153, 129, 1)",
        container_id: "tradingview_b3383",
      });
    </script>
  </div>
  <!-- TradingView Widget END -->
</div>
{% if request.user.is_authenticated %}
<form action="" method="POST">
  {% csrf_token %} {{ OrderForm.as_p }}
  <input type="submit" value="Submit" />
</form>
{% endif %}
<script src="{% static 'stocks/main.js' %}"></script>
{% endblock content %}
